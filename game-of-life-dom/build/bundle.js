var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let m;function p(t){m=t}function $(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const b=[],A=[],E=[],x=[],y=Promise.resolve();let v=!1;function C(t){E.push(t)}const w=new Set;let L=0;function S(){const t=m;do{for(;L<b.length;){const t=b[L];L++,p(t),_(t.$$)}for(p(null),b.length=0,L=0;A.length;)A.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];w.has(e)||(w.add(e),e())}E.length=0}while(b.length);for(;x.length;)x.pop()();v=!1,w.clear(),p(t)}function _(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const I=new Set;function V(t,e){-1===t.$$.dirty[0]&&(b.push(t),v||(v=!0,y.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function k(l,i,s,c,u,h,f,g=[-1]){const d=m;p(l);const $=l.$$={fragment:null,ctx:null,props:h,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:g,skip_bound:!1,root:i.target||d.$$.root};f&&f($.root);let b=!1;if($.ctx=s?s(l,i.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return $.ctx&&u($.ctx[t],$.ctx[t]=o)&&(!$.skip_bound&&$.bound[t]&&$.bound[t](o),b&&V(l,t)),e})):[],$.update(),b=!0,o($.before_update),$.fragment=!!c&&c($.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);$.fragment&&$.fragment.l(t),t.forEach(a)}else $.fragment&&$.fragment.c();i.intro&&((A=l.$$.fragment)&&A.i&&(I.delete(A),A.i(E))),function(t,n,l,i){const{fragment:s,on_mount:a,on_destroy:c,after_update:u}=t.$$;s&&s.m(n,l),i||C((()=>{const n=a.map(e).filter(r);c?c.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(C)}(l,i.target,i.anchor,i.customElement),S()}var A,E;p(d)}function D(t,e,n){const o=t.slice();return o[7]=e[n],o[9]=n,o}function N(t,e,n){const o=t.slice();return o[7]=e[n],o[11]=n,o}function T(e){let n,o,r;return{c(){n=u("td"),d(n,"id",e[11]+","+e[9]),d(n,"class","svelte-hmi1a6")},m(t,l){s(t,n,l),o||(r=g(n,"click",e[2]),o=!0)},p:t,d(t){t&&a(n),o=!1,r()}}}function G(t){let e,n,o=Array(t[3].width),r=[];for(let e=0;e<o.length;e+=1)r[e]=T(N(t,o,e));return{c(){e=u("tr");for(let t=0;t<r.length;t+=1)r[t].c();n=f(),d(e,"class","svelte-hmi1a6")},m(t,o){s(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);i(e,n)},p(t,l){if(4&l){let i;for(o=Array(t[3].width),i=0;i<o.length;i+=1){const s=N(t,o,i);r[i]?r[i].p(s,l):(r[i]=T(s),r[i].c(),r[i].m(e,n))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},d(t){t&&a(e),c(r,t)}}}function O(e){let n,o,r,l,m,p,$,b,A,E,x,y,v,C,w,L,S=Array(e[3].height),_=[];for(let t=0;t<S.length;t+=1)_[t]=G(D(e,S,t));return{c(){n=u("main"),o=u("h1"),r=h(e[0]),l=f(),m=u("p"),m.textContent="Technologies: Javascript + some Svelte. Using DOM (no canvas).",p=f(),$=u("p"),$.innerHTML='<a href="https://github.com/llagerlof/game-of-life-dom">GitHub</a> | Author: Lawrence Lagerlof',b=f(),A=u("p"),A.textContent=`Grid width: ${e[3].width} | Grid height: ${e[3].height}`,E=f(),x=u("div"),y=u("table");for(let t=0;t<_.length;t+=1)_[t].c();v=f(),C=u("button"),C.textContent="Advance generation",d(o,"class","svelte-hmi1a6"),d(m,"class","subtitle svelte-hmi1a6"),d($,"class","signature svelte-hmi1a6"),d(y,"class","grid svelte-hmi1a6"),d(x,"id","grid_container"),d(C,"class","svelte-hmi1a6"),d(n,"class","svelte-hmi1a6")},m(t,a){s(t,n,a),i(n,o),i(o,r),i(n,l),i(n,m),i(n,p),i(n,$),i(n,b),i(n,A),i(n,E),i(n,x),i(x,y);for(let t=0;t<_.length;t+=1)_[t].m(y,null);i(n,v),i(n,C),w||(L=g(C,"click",e[1]),w=!0)},p(t,[e]){if(1&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(r,t[0]),12&e){let n;for(S=Array(t[3].height),n=0;n<S.length;n+=1){const o=D(t,S,n);_[n]?_[n].p(o,e):(_[n]=G(o),_[n].c(),_[n].m(y,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=S.length}},i:t,o:t,d(t){t&&a(n),c(_,t),w=!1,L()}}}function M(t,e,n){let{name:o}=e;class r{static get ALIVE(){return"alive"}static get DEAD(){return"dead"}constructor(t,e,n){this.setState(t),this.x=e,this.y=n}setState(t){this.state=t}setNextState(t){this.next_state=t}getNeighborsCount(t){let e=0;for(let n=-1;n<2;n++)for(let o=-1;o<2;o++){let l=this.x+n,i=this.y+o;l>=0&&l<t.width&&i>=0&&i<t.height&&t.grid[i][l].state==r.ALIVE&&(0===n&&0===o||e++)}return e}}$((async()=>{i.updateTable()}));var l={width:41,height:41},i=new class{constructor(t,e){this.width=t,this.height=e,this.grid=[];for(let n=0;n<e;n++){let e=[];for(let o=0;o<t;o++)e.push(new r(r.DEAD,o,n));this.grid.push(e)}}getCell(t,e){return this.grid[e][t]}toggleCell(t){let e=t.split(","),n=parseInt(e[0]),o=parseInt(e[1]),l=this.getCell(n,o);l.state==r.ALIVE?l.setState(r.DEAD):l.setState(r.ALIVE),l.setNextState(void 0)}nextGen(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){let n=this.getCell(e,t),o=n.getNeighborsCount(this);n.state==r.ALIVE?2==o||3==o?n.setNextState(r.ALIVE):n.setNextState(r.DEAD):3==o&&n.setNextState(r.ALIVE)}for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){let n=this.getCell(e,t);n.state=void 0===n.next_state?r.DEAD:n.next_state}}updateTable(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){let n=this.getCell(e,t).state==r.ALIVE?"black":"white",o=String(e)+","+String(t);document.getElementById(o).style.backgroundColor=n}}}(l.width,l.height);return i.getCell(21,19).setState(r.ALIVE),i.getCell(20,20).setState(r.ALIVE),i.getCell(21,20).setState(r.ALIVE),i.getCell(22,20).setState(r.ALIVE),i.getCell(21,21).setState(r.ALIVE),i.getCell(4,2).setState(r.ALIVE),i.getCell(5,3).setState(r.ALIVE),i.getCell(5,4).setState(r.ALIVE),i.getCell(4,4).setState(r.ALIVE),i.getCell(3,4).setState(r.ALIVE),t.$$set=t=>{"name"in t&&n(0,o=t.name)},[o,function(){i.nextGen(),i.updateTable()},function(t){i.toggleCell(t.target.id),i.updateTable()},l]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),k(this,t,M,O,l,{name:0})}}({target:document.body,props:{name:"Conway's Game of Life DOM"}})}();
//# sourceMappingURL=bundle.js.map
